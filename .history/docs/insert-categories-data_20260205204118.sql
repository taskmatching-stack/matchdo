-- ========================================
-- MatchDO 完整分類資料插入
-- 包含主分類和子分類
-- ========================================

-- 先清空現有資料（可選，如果要重新建立）
-- TRUNCATE TABLE ai_categories CASCADE;

-- ========================================
-- 插入主分類
-- ========================================

INSERT INTO ai_categories (id, name, description, parent_id, image_url) VALUES 
('00000000-0000-0000-0000-000000000001', '設計', '各類設計服務', NULL, NULL),
('00000000-0000-0000-0000-000000000002', '商業', '商業相關服務', NULL, NULL),
('00000000-0000-0000-0000-000000000003', '學習', '教育與學習服務', NULL, NULL),
('00000000-0000-0000-0000-000000000004', '居家', '居家生活服務', NULL, NULL),
('00000000-0000-0000-0000-000000000005', '活動', '活動規劃與執行', NULL, NULL),
('00000000-0000-0000-0000-000000000006', '美業', '美容美髮相關', NULL, NULL),
('00000000-0000-0000-0000-000000000007', '運動', '運動健身服務', NULL, NULL),
('00000000-0000-0000-0000-000000000008', '其他', '其他類型服務', NULL, NULL)
ON CONFLICT (name) DO UPDATE SET description = EXCLUDED.description;

-- ========================================
-- 插入子分類 - 設計
-- ========================================

INSERT INTO ai_categories (name, parent_id, description) VALUES 
('平面設計', '00000000-0000-0000-0000-000000000001', 'Logo、海報、名片等平面設計'),
('網頁設計', '00000000-0000-0000-0000-000000000001', '網站UI/UX設計、前端開發'),
('UI/UX設計', '00000000-0000-0000-0000-000000000001', '使用者介面與體驗設計'),
('包裝設計', '00000000-0000-0000-0000-000000000001', '產品包裝、禮盒設計'),
('插畫設計', '00000000-0000-0000-0000-000000000001', '手繪插畫、數位插畫'),
('3D設計', '00000000-0000-0000-0000-000000000001', '3D建模、渲染、動畫'),
('室內設計', '00000000-0000-0000-0000-000000000001', '住宅、商業空間設計'),
('建築設計', '00000000-0000-0000-0000-000000000001', '建築規劃、施工圖繪製')
ON CONFLICT (name) DO NOTHING;

-- ========================================
-- 插入子分類 - 商業
-- ========================================

INSERT INTO ai_categories (name, parent_id, description) VALUES 
('行銷企劃', '00000000-0000-0000-0000-000000000002', '品牌行銷、活動企劃'),
('文案撰寫', '00000000-0000-0000-0000-000000000002', '廣告文案、網站內容撰寫'),
('社群經營', '00000000-0000-0000-0000-000000000002', 'FB、IG、LINE社群管理'),
('SEO優化', '00000000-0000-0000-0000-000000000002', '搜尋引擎優化、網站流量提升'),
('影片剪輯', '00000000-0000-0000-0000-000000000002', '商業影片、宣傳片製作'),
('攝影服務', '00000000-0000-0000-0000-000000000002', '商品攝影、形象照拍攝'),
('翻譯服務', '00000000-0000-0000-0000-000000000002', '中英日韓等多國語言翻譯'),
('財務顧問', '00000000-0000-0000-0000-000000000002', '會計記帳、稅務規劃'),
('法律諮詢', '00000000-0000-0000-0000-000000000002', '契約審閱、法律顧問')
ON CONFLICT (name) DO NOTHING;

-- ========================================
-- 插入子分類 - 學習
-- ========================================

INSERT INTO ai_categories (name, parent_id, description) VALUES 
('程式教學', '00000000-0000-0000-0000-000000000003', 'Python、JavaScript等程式語言教學'),
('語言教學', '00000000-0000-0000-0000-000000000003', '英文、日文、韓文等外語教學'),
('音樂教學', '00000000-0000-0000-0000-000000000003', '鋼琴、吉他、歌唱等音樂課程'),
('繪畫教學', '00000000-0000-0000-0000-000000000003', '素描、水彩、油畫等美術課程'),
('數學家教', '00000000-0000-0000-0000-000000000003', '國小到高中數學家教'),
('課業輔導', '00000000-0000-0000-0000-000000000003', '全科課業輔導、升學輔導'),
('才藝教學', '00000000-0000-0000-0000-000000000003', '舞蹈、戲劇、魔術等才藝')
ON CONFLICT (name) DO NOTHING;

-- ========================================
-- 插入子分類 - 居家
-- ========================================

INSERT INTO ai_categories (name, parent_id, description) VALUES 
('清潔打掃', '00000000-0000-0000-0000-000000000004', '居家清潔、辦公室清潔'),
('家電維修', '00000000-0000-0000-0000-000000000004', '冷氣、冰箱、洗衣機等維修'),
('水電工程', '00000000-0000-0000-0000-000000000004', '水管、電路維修安裝'),
('油漆粉刷', '00000000-0000-0000-0000-000000000004', '室內外油漆、壁紙施工'),
('木工裝潢', '00000000-0000-0000-0000-000000000004', '木作家具、裝潢施工'),
('搬家服務', '00000000-0000-0000-0000-000000000004', '搬家打包、運送、定位'),
('園藝造景', '00000000-0000-0000-0000-000000000004', '庭院設計、植栽維護'),
('寵物照顧', '00000000-0000-0000-0000-000000000004', '寵物美容、遛狗、寄宿')
ON CONFLICT (name) DO NOTHING;

-- ========================================
-- 插入子分類 - 活動
-- ========================================

INSERT INTO ai_categories (name, parent_id, description) VALUES 
('婚禮企劃', '00000000-0000-0000-0000-000000000005', '婚禮統籌、場地佈置'),
('活動主持', '00000000-0000-0000-0000-000000000005', '婚禮、尾牙、記者會主持'),
('表演服務', '00000000-0000-0000-0000-000000000005', '樂團、魔術、舞蹈表演'),
('攝影錄影', '00000000-0000-0000-0000-000000000005', '活動紀錄、婚禮攝影'),
('餐飲外燴', '00000000-0000-0000-0000-000000000005', '派對餐點、buffet外燴'),
('場地租借', '00000000-0000-0000-0000-000000000005', '會議室、派對場地租借')
ON CONFLICT (name) DO NOTHING;

-- ========================================
-- 插入子分類 - 美業
-- ========================================

INSERT INTO ai_categories (name, parent_id, description) VALUES 
('美髮造型', '00000000-0000-0000-0000-000000000006', '剪髮、染髮、燙髮造型'),
('美甲美睫', '00000000-0000-0000-0000-000000000006', '光療指甲、接睫毛'),
('美容護膚', '00000000-0000-0000-0000-000000000006', '臉部保養、SPA護理'),
('化妝服務', '00000000-0000-0000-0000-000000000006', '新娘妝、宴會妝、特殊妝'),
('身體按摩', '00000000-0000-0000-0000-000000000006', '指壓、精油、經絡按摩'),
('紋繡美容', '00000000-0000-0000-0000-000000000006', '霧眉、繡眼線、飄眉')
ON CONFLICT (name) DO NOTHING;

-- ========================================
-- 插入子分類 - 運動
-- ========================================

INSERT INTO ai_categories (name, parent_id, description) VALUES 
('健身教練', '00000000-0000-0000-0000-000000000007', '一對一健身指導、體態雕塑'),
('瑜珈教學', '00000000-0000-0000-0000-000000000007', '哈達瑜珈、空中瑜珈'),
('游泳教學', '00000000-0000-0000-0000-000000000007', '成人、兒童游泳課程'),
('球類教學', '00000000-0000-0000-0000-000000000007', '籃球、羽球、網球教學'),
('武術教學', '00000000-0000-0000-0000-000000000007', '跆拳道、空手道、拳擊'),
('舞蹈教學', '00000000-0000-0000-0000-000000000007', '國標舞、街舞、芭蕾')
ON CONFLICT (name) DO NOTHING;

-- ========================================
-- 插入子分類 - 其他
-- ========================================

INSERT INTO ai_categories (name, parent_id, description) VALUES 
('命理占卜', '00000000-0000-0000-0000-000000000008', '算命、塔羅牌、紫微斗數'),
('客製化商品', '00000000-0000-0000-0000-000000000008', '手工藝品、客製禮物'),
('寫真攝影', '00000000-0000-0000-0000-000000000008', '個人寫真、情侶寫真'),
('汽車美容', '00000000-0000-0000-0000-000000000008', '洗車、打蠟、鍍膜')
ON CONFLICT (name) DO NOTHING;

-- ========================================
-- 驗證資料
-- ========================================

-- 查看所有分類
SELECT 
    c.name AS "分類名稱",
    CASE WHEN c.parent_id IS NULL THEN '主分類' ELSE '子分類' END AS "類型",
    COALESCE(p.name, '-') AS "所屬主分類",
    COALESCE(c.image_url, '使用預設圖') AS "圖片狀態"
FROM ai_categories c
LEFT JOIN ai_categories p ON c.parent_id = p.id
ORDER BY 
    CASE WHEN c.parent_id IS NULL THEN 0 ELSE 1 END,
    COALESCE(p.name, c.name),
    c.name;

-- 統計
SELECT 
    CASE WHEN parent_id IS NULL THEN '主分類' ELSE '子分類' END AS "類型",
    COUNT(*) AS "數量"
FROM ai_categories
GROUP BY CASE WHEN parent_id IS NULL THEN '主分類' ELSE '子分類' END;
