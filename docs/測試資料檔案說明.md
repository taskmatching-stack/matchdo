# 測試資料檔案說明

## 檔案位置與筆數

| 檔案路徑 | 說明 | 專家數 | 報價(listings)筆數 |
|----------|------|--------|---------------------|
| **scripts/generate-test-data.js** | 主測試資料腳本（寫入 Supabase） | **100 位** | **100 筆**（每位 1 筆） |
| **docs/generate-test-data-100experts.js** | 100 位專家版（含統包多筆報價） | **100 位** | **115 筆**（30+3×5 居家 + 50 數位 + 20 設計，統包每位 5 筆） |
| **docs/generate-test-data-v3-unitprice.js** | 精簡版、單價/單位對齊 | **約 32 位** | **32 筆**（6+6+4+4 居家 + 6 影片 + 6 網站） |
| **docs/generate-test-project.js** | 只建立「測試專案+項目」（不建專家） | — | 1 個專案 + 多筆 project_items |

---

## 階層式價格表（依數量）price_tiers

- **scripts/generate-test-data.js** 已內建 **2 筆** 階梯定價報價：
  - **林木工1**：系統櫃，單位「組」— 1～3 組、4～10 組、11 組以上 三階單價。
  - **黃油漆1**：全室油漆，單位「坪」— 1～10 坪、11～30 坪、31 坪以上 三階單價。
- 預媒合／媒合會依發包端「數量」落入對應階梯，取該階單價 × 數量 與總預算比對。
- 其餘腳本（docs/generate-test-data-*.js）目前未寫入 `price_tiers`。

---

## 統包專案／統包專家

- **scripts/generate-test-data.js**：**1 位**統包專家「楊工程」（高雄市），1 筆報價「統包專業服務」。
- **docs/generate-test-data-100experts.js**：**3 位**統包師傅（楊統包、孫工程、郭師傅），每位 **5 筆**報價：全室裝潢統包、室內設計、木工、油漆、水電。
- **docs/generate-test-project.js**：建立 **1 個**發包專案「30坪新家裝潢」，**3 個**工項（室內設計、系統櫃、油漆），可當作統包型專案測試。

---

## 執行方式

- **scripts/generate-test-data.js**（建議用這支寫入 DB）  
  ```bash
  node scripts/generate-test-data.js          # 建立 100 位專家 + 100 筆報價
  node scripts/generate-test-data.js --clean  # 先刪除 @matchdo.test 測試帳號再重建
  ```
- **docs/** 底下的腳本需在專案根目錄執行，並設定好 `.env`（SUPABASE_URL、SUPABASE_SERVICE_ROLE_KEY）  
  ```bash
  node docs/generate-test-data-100experts.js
  node docs/generate-test-data-v3-unitprice.js
  node docs/generate-test-project.js
  ```

---

## 補充

- 上述腳本都會寫入 **listings.tags**，供媒合／預媒合使用。
- 若 DB 裡現有 listings 沒有 tags，可執行 **docs/backfill-listings-tags.sql** 補齊。
