# 測試步驟（.env 已有 key 時）

## 1. .env 需要哪個 key？

- **SUPABASE_URL**：你已有（例：`https://xxx.supabase.co`）
- **SUPABASE_SERVICE_ROLE_KEY**：要用 **Service Role（秘密金鑰）**，不是 Anon / Publishable  
  → Supabase 後台 **Project Settings → API** 底下點 **API settings**，在 **Project API keys** 裡複製 **`service_role`**（標註 secret 的那個）。  
  → 測試資料腳本會用這個建立專家帳號與報價；只用 Anon key 會權限不足。

若你 .env 裡已有 `SUPABASE_SERVICE_ROLE_KEY`，就不用再改。

---

## 2. 終端機執行（專案根目錄）

```bash
# 建立 100 位專家 + 100 筆報價（含 TAGS、階梯定價、統包）
node scripts/generate-test-data.js

# 建立 1 個測試專案 + 3 個工項（發包端用）
node docs/create-draft-items-for-match.js
```

第二個腳本會印出 **project_id**，記下來。

---

## 3. 啟動後端並測試

```bash
npm start
```

瀏覽器打開：

- 發包端：`http://localhost:3000/client/my-projects.html`  
  登入：**test.client.v3@matchdo.test** / **Test1234!**  
  點進專案 → 專案詳情 → 預媒合 / 送出媒合

- 專家端：`http://localhost:3000/expert/my-listings.html`  
  登入：**expert.interior1@matchdo.test** / **Test1234!**

---

**就這樣。** env 有 key、跑完上面兩支腳本、再 `npm start` 就能測。
